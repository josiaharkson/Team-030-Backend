(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[20,36],{121:function(e,a,t){"use strict";t.r(a),function(e){t.d(a,"default",(function(){return J}));var n=t(37),r=t.n(n),l=t(53),i=t(34),o=t(21),c=t(0),s=t.n(c),u=t(78),m=t.n(u),d=t(65),p=t(20),f=t(181),g=t(118),b=t(277),E=t(117),y=t(179),h=t(182),v=t(232),j=t.n(v),O=t(266),C=t(176),x=t(322),S=t(314),k=t(318),w=t(316),N=t(317),P=t(315),F=t(238),I=t.n(F),z=t(289),D=t(239),A=t.n(D),T=t(224),_=t(82),B=t(27),M=t(227),L=t(79),V=(t(191),Object(L.a)()),H=Object(d.a)((function(e){var a;return{appBar:{position:"relative",color:"#FFF",background:"rgba(18, 107, 22, 0.88)"},title:Object(o.a)({marginLeft:e.spacing(2),flex:1,"&::before":{content:'"My Farm - "'}},e.breakpoints.down("sm"),{fontSize:13,marginLeft:5,"&::before":{content:'""'}}),body:Object(o.a)({marginTop:-20},e.breakpoints.down("sm"),{marginTop:-30}),bodyContent:Object(o.a)({padding:e.spacing(2,6)},e.breakpoints.down("sm"),{padding:e.spacing(2)}),btn:{height:27,margin:"3px 5px",fontSize:9,marginBottom:10},message:{fontSize:30,textAlign:"center",margimBottom:30},span:{color:"gray",textAlign:"left",fontSize:14},paper:(a={width:"100%",height:140,display:"flex",flex:1,flexDirection:"column",alignItems:"center",justifyContent:"flex-end",fontSize:14},Object(o.a)(a,e.breakpoints.down("sm"),{fontSize:9}),Object(o.a)(a,"textAlign","center"),a),prodDetails:{display:"flex",flex:1,flexDirection:"column",justifyContent:"space-between",color:"gray",fontSize:12,margin:"10px 5px",textAlign:"center"},bodyImg:Object(o.a)({zIndex:10,backgroundRepeat:"no-repeat",backgroundSize:"cover",width:"100%",height:400,backgroundPosition:"center",boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)"},e.breakpoints.down("sm"),{height:270}),items_style:{fontSize:12,fontFamily:"monospace",color:"green","&>b":{color:"#b31d1d",fontFamily:"inherit"}},my_btns:{display:"flex",flex:1,flexDirection:"row",alignItems:"center",justifyContent:"center"}}})),R=s.a.forwardRef((function(e,a){return s.a.createElement(O.a,Object.assign({direction:"up",ref:a},e))}));function J(a){var t=a.farmId,n=a.farmName,r=a.farmPic,l=a.handleClose,o=a.token,c=H(),u=s.a.useState("/img/defaultSingleFarm2.jpg"),m=Object(i.a)(u,2),d=m[0],g=m[1],v=V.API_URL+"/api/product/"+t,O=Object(T.a)({url:v,headers:Object(_.a)(o)}),C=O.data,x=O.error,k=O.isValidating,w=O.mutate,N=s.a.useState(""),P=Object(i.a)(N,2),F=P[0],I=P[1],z=s.a.useState("success"),D=Object(i.a)(z,2),A=D[0],B=D[1],L=s.a.useState(!1),J=Object(i.a)(L,2),q=J[0],Q=J[1],G=s.a.useState(!1),Y=Object(i.a)(G,2),K=Y[0],X=Y[1];return s.a.useEffect((function(){if(r){var a=e.from(r.data,"binary").toString("base64"),t="data:".concat(r.contentType,";base64,").concat(a);g(t)}}),[r]),s.a.createElement("div",null,q&&s.a.createElement(M.a,{autoHideDuration:1e4,message:F,handleClose:function(){return Q(!1)},type:A}),s.a.createElement(S.a,{fullScreen:!0,open:!0,onClose:l,TransitionComponent:R},s.a.createElement(f.a,{className:c.appBar},s.a.createElement(E.a,null,s.a.createElement(y.a,{edge:"start",color:"inherit",onClick:l,"aria-label":"close"},s.a.createElement(j.a,null)),s.a.createElement(h.a,{variant:"h6",className:c.title},n.toUpperCase()),s.a.createElement(p.a,{autoFocus:!0,color:"inherit",onClick:l},"CLose"))),s.a.createElement("div",{className:c.body},s.a.createElement("div",{style:{backgroundImage:'url("'.concat(d,'")')},className:c.bodyImg}),s.a.createElement("div",{className:c.bodyContent},s.a.createElement("h2",null,"All Products for this farm",s.a.createElement(b.a,{badgeContent:C?C.response.length:"0",color:"secondary",style:{margin:"0 15px"}})),s.a.createElement(p.a,{color:"inherit",variant:"outlined",onClick:function(){X(!0)}},"Add A new Product"),s.a.createElement(U,{data:C,error:x,isValidating:k}),K&&s.a.createElement(W,{open:K,farmId:t,token:o,handleClose:function(){X(!1)},refresh:function(){w()},setMsg:I,setMsgType:B,setSnackBarOpen:Q})))))}var U=function(e){var a=e.data,t=e.error,n=e.isValidating,r=H();return n?s.a.createElement(B.a,null):t?s.a.createElement("div",null,"An Error Occured!"):a&&a.response?a.response.length?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:r.message},s.a.createElement("span",{className:r.span},"Click on an item to open product")),s.a.createElement(C.a,{container:!0,spacing:2},a.response.map((function(e){return s.a.createElement(q,{key:Math.random()+e.name,product:e,deleteFarm:function(){return a=e._id,console.log({id:a});var a}})})))):s.a.createElement("div",{className:r.message,style:{margin:30}},"You have not added any Product yet under this farm!"):s.a.createElement(B.a,null)},W=function(e){var a=e.open,t=e.handleClose,n=e.farmId,o=e.refresh,c=e.token,u=e.setMsg,d=e.setMsgType,f=e.setSnackBarOpen,g=s.a.useState(""),b=Object(i.a)(g,2),E=b[0],y=b[1],h=s.a.useState(""),v=Object(i.a)(h,2),j=v[0],O=v[1],C=s.a.useState(""),F=Object(i.a)(C,2),D=F[0],A=F[1],T=s.a.useState(null),B=Object(i.a)(T,2),M=B[0],L=B[1],H=function(){var e=Object(l.a)(r.a.mark((function e(){var a,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E.trim()){e.next=6;break}return console.log(443344),u("Form not Completed"),d("error"),f(!0),e.abrupt("return");case 6:return a=V.API_URL+"/api/product/add/"+n,(l=new FormData).append("image",M),l.append("data",JSON.stringify({name:E,farm:n,quantity:j,sold:D})),e.prev=10,e.next=13,m.a.post(a,l,{headers:Object(_.a)(c),"Content-Type":"multipart/form-data"});case 13:o(),t(),u("New Product Has been Created Successfully!"),d("success"),y(""),f(!0),e.next=28;break;case 21:e.prev=21,e.t0=e.catch(10),e.t0.response&&e.t0.response.data&&console.log(e.t0.response.data),u("An Error Occured!"),d("error"),f(!0),y("");case 28:case"end":return e.stop()}}),e,null,[[10,21]])})));return function(){return e.apply(this,arguments)}}();return s.a.createElement("div",null,s.a.createElement(S.a,{open:a,onClose:t,"aria-labelledby":"form-dialog-title"},s.a.createElement(P.a,{id:"form-dialog-title"},"Add New Product"),s.a.createElement(w.a,null,s.a.createElement(N.a,null,"Please enter your name of the product here."),s.a.createElement(x.a,{autoFocus:!0,margin:"dense",id:"name",label:"Product Name",type:"email",fullWidth:!0,value:E,onChange:function(e){return y(e.target.value)}}),s.a.createElement(x.a,{margin:"dense",id:"name",label:"Product Quantity",type:"number",fullWidth:!0,value:j,onChange:function(e){return O(e.target.value)}}),s.a.createElement(x.a,{margin:"dense",id:"name",label:"Product Price",type:"number",fullWidth:!0,value:D,onChange:function(e){return A(e.target.value)}}),s.a.createElement(x.a,{label:"Product Image",type:"file",fullWidth:!0,onChange:function(e){return function(e){if(e.target.files[0]){var a=e.target.files[0].type;if("image/png"!==a&&"image/jpeg"!==a&&"image/jpg"!==a)return alert("Invalid Image file sected!");L(e.target.files[0])}}(e)},inputProps:{accept:"image/jpg, image/jpeg, image/png",endadornment:s.a.createElement(z.a,{position:"end"},s.a.createElement(I.a,null))}})),s.a.createElement(k.a,null,s.a.createElement(p.a,{onClick:t,color:"primary"},"Cancel"),s.a.createElement(p.a,{onClick:function(){return H()},color:"primary"},"Create New"))))},q=function(a){var t=a.product,n=a.deleteFarm,r=H(),l=t.pic,o=s.a.useState("/img/singleProductDefault.jpg"),c=Object(i.a)(o,2),u=c[0],m=c[1],d=V.API_URL+"/api/product/stats/"+t._id,f=Object(T.a)({url:d}),b=f.data,E=f.error,v=f.isValidating;return s.a.useEffect((function(){if(l){var a=e.from(l.data,"binary").toString("base64"),t="data:".concat(l.contentType,";base64,").concat(a);m(t)}}),[l]),s.a.createElement("div",{className:"responsive"},s.a.createElement("div",{className:"gallery"},s.a.createElement("img",{src:u,alt:"Cinque Terre",width:"600",height:"400"}),s.a.createElement("div",{className:"desc"},s.a.createElement("div",null,s.a.createElement(h.a,{style:{textTransform:"capitalize",whiteSpace:"nowrap",width:"100%",overflow:"hidden",fontSize:12,textOverflow:"ellipsis"}},t.name),s.a.createElement("div",{className:r.my_btns},s.a.createElement(p.a,{className:r.btn,variant:"outlined",color:"secondary",size:"small"},"open"),s.a.createElement(y.a,{edge:"end","aria-label":"delete",onClick:function(){return n()}},s.a.createElement(A.a,{style:{color:"red"}})))),s.a.createElement("div",{className:r.prodDetails},E?s.a.createElement(s.a.Fragment,null,"GET error!"):s.a.createElement(s.a.Fragment,null,v?s.a.createElement(g.a,{size:20}):s.a.createElement(s.a.Fragment,null,b?s.a.createElement(s.a.Fragment,null,s.a.createElement(h.a,{className:r.items_style},s.a.createElement("b",null,"Quantity"),": ",b.response.quantity),s.a.createElement(h.a,{className:r.items_style},s.a.createElement("b",null,"Price"),": ",b.response.sold)):null))))))}}.call(this,t(236).Buffer)},191:function(e,a,t){},224:function(e,a,t){"use strict";t.d(a,"a",(function(){return s}));var n=t(19),r=t(55),l=t(241),i=t(78),o=t.n(i),c=t(0);function s(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=a.initialData,i=Object(r.a)(a,["initialData"]),s=Object(l.a)(e&&JSON.stringify(e),(function(){return o()(e||{})}),Object(n.a)(Object(n.a)({},i),{},{initialData:t&&{status:200,statusText:"InitialData",headers:t.headers?Object(n.a)({},t.headers):{},data:t}})),u=s.data,m=s.error,d=s.isValidating,p=s.revalidate,f=s.mutate;return Object(c.useMemo)((function(){return{data:u&&u.data,response:u,error:m,isValidating:d,revalidate:p,mutate:f}}),[u,m,d,p,f])}},227:function(e,a,t){"use strict";t.d(a,"a",(function(){return p}));var n=t(0),r=t.n(n),l=t(65),i=t(326),o=t(179),c=t(232),s=t.n(c),u=t(323),m=Object(l.a)((function(e){return{close:{padding:e.spacing(.5)}}}));function d(e){return r.a.createElement(u.a,Object.assign({elevation:6,variant:"filled"},e))}function p(e){var a=m();return r.a.createElement("div",null,r.a.createElement(i.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:!0,autoHideDuration:e.autoHideDuration?e.autoHideDuration:6e3,onClose:function(){return e.handleClose()},ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},e.message),action:[r.a.createElement(o.a,{key:"close","aria-label":"close",color:"inherit",className:a.close},r.a.createElement(s.a,null))]},r.a.createElement(d,{onClose:e.handleClose,severity:e.type},e.message)))}}}]);
//# sourceMappingURL=20.6208f6f3.chunk.js.map